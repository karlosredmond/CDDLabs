<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d7/d46/a00002">
    <title>Semaphore.cpp File Reference</title>
<para>Include dependency diagram for Semaphore.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d8/de7/a00417.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for Semaphore.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../de/df7/a00418.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file /home/karl/ConcDev/CDDLabs/Lab1/Semaphore.cpp</para>
    </simplesect>
    <literallayout><computeroutput>
1 <emphasis class="preprocessor">#include&#32;&quot;<link linkend="d1/d7c/a00003">Semaphore.h</link>&quot;</emphasis>
<link linkend="d8/d84/a00001_1ade7c17fb79686f6fe6865d28e80d5a92">12 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d8/d84/a00001_1ade7c17fb79686f6fe6865d28e80d5a92">Semaphore::Wait</link>()
13 {
14 &#32;&#32;&#32;&#32;&#32;&#32;std::unique_lock&lt;&#32;std::mutex&#32;&gt;&#32;lock(<link linkend="d8/d84/a00001_1a5c751dae9068bdb864af14129bbe0fa1">m_mutex</link>);
15 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d8/d84/a00001_1a12a97001c2c2d1e81297ba6bd8ce1148">m_condition</link>.wait(lock,[&amp;]()-&gt;<emphasis class="keywordtype">bool</emphasis>{&#32;<emphasis class="keywordflow">return</emphasis>&#32;<link linkend="d8/d84/a00001_1a07984e3c1945516f236d5d0f8024bc3a">m_uiCount</link>&gt;0;&#32;});
16 &#32;&#32;&#32;&#32;&#32;&#32;--<link linkend="d8/d84/a00001_1a07984e3c1945516f236d5d0f8024bc3a">m_uiCount</link>;
17 }
18 
19 <emphasis class="keyword">template</emphasis>&lt;&#32;<emphasis class="keyword">typename</emphasis>&#32;R,<emphasis class="keyword">typename</emphasis>&#32;P&#32;&gt;
<link linkend="d8/d84/a00001_1a0843e39259d9d7e34c3f1b02e0e3d6b7">20 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d8/d84/a00001_1ade7c17fb79686f6fe6865d28e80d5a92">Semaphore::Wait</link>(<emphasis class="keyword">const</emphasis>&#32;std::chrono::duration&lt;R,P&gt;&amp;&#32;crRelTime)
21 {
22 &#32;&#32;&#32;&#32;&#32;&#32;std::unique_lock&lt;&#32;std::mutex&#32;&gt;&#32;lock(<link linkend="d8/d84/a00001_1a5c751dae9068bdb864af14129bbe0fa1">m_mutex</link>);
23 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(!<link linkend="d8/d84/a00001_1a12a97001c2c2d1e81297ba6bd8ce1148">m_condition</link>.wait_for(lock,crRelTime,[&amp;]()-&gt;bool{&#32;return&#32;m_uiCount&gt;0;&#32;})){
24 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">false</emphasis>;
25 &#32;&#32;&#32;&#32;&#32;&#32;}
26 &#32;&#32;&#32;&#32;&#32;&#32;--<link linkend="d8/d84/a00001_1a07984e3c1945516f236d5d0f8024bc3a">m_uiCount</link>;
27 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
28 }
29 
<link linkend="d8/d84/a00001_1adf531976162ff22f9b4d86ea0c4e1a87">30 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d8/d84/a00001_1adf531976162ff22f9b4d86ea0c4e1a87">Semaphore::Signal</link>()
31 {
32 &#32;&#32;&#32;&#32;&#32;&#32;std::unique_lock&lt;&#32;std::mutex&#32;&gt;&#32;lock(<link linkend="d8/d84/a00001_1a5c751dae9068bdb864af14129bbe0fa1">m_mutex</link>);
33 &#32;&#32;&#32;&#32;&#32;&#32;++<link linkend="d8/d84/a00001_1a07984e3c1945516f236d5d0f8024bc3a">m_uiCount</link>;
34 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d8/d84/a00001_1a12a97001c2c2d1e81297ba6bd8ce1148">m_condition</link>.notify_one();
35 }
    </computeroutput></literallayout>
</section>
